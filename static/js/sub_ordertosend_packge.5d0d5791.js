(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sub_ordertosend_packge"],{"00d9":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"insurance-tool-tip"}},[e("h3",{staticClass:"insurance-title"},[t._v(" "+t._s(t.i18n.t("estimate_insurance_title"))+" ")]),t._l(t.insuranceList,(function(s,i){return e("div",{key:i},[e("h4",[t._v(t._s(s.title))]),e("p",[t._v(t._s(s.content))])])}))],2)},a=[],n=s("0692"),o={props:{insuranceList:{type:Array,default:[]}},name:"InsuranceToolTip",data(){return{i18n:n["a"]}}},c=o,r=(s("f3b1"),s("2877")),l=Object(r["a"])(c,i,a,!1,null,"5f4193cc",null);e["a"]=l.exports},16090:function(t,e,s){},"19f1":function(t,e,s){"use strict";s("bddc")},"264a":function(t,e,s){"use strict";s("d786")},"2f01":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"ordertosend"}},[e("common-header"),e("div",{staticClass:"content"},[e("h2",[t._v(t._s(t.$t("ordertosend_title")))]),e("div",{staticClass:"waybill-box"},[e("waybillAddress",{on:{addressChange:t.addressChange}}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.goodsLoading,expression:"goodsLoading"}],staticClass:"goods-list"},[e("goodsCommodities",{attrs:{goodsIds:t.goodsIds},on:{initAnalyze:t.initAnalyze,onAnalyze:t.onAnalyze}}),e("h3",[t._v(t._s(t.$t("ordertosend_service_config_title")))]),e("a-spin",{staticClass:"service-config",attrs:{spinning:t.isLoading}},[e("a-checkbox-group",{staticClass:"config-group",attrs:{value:t.services},on:{change:t.serviceChange}},t._l(t.serviceConfigsArr,(function(s){return e("div",{key:s.code,staticClass:"config"},[e("a-checkbox",{attrs:{value:s.code,disabled:t.isRehearsal}},[e("span",{class:{title:t.services.includes(s.code)}},[t._v(t._s(s.title))])]),e("span",{staticClass:"fees"},[t._v(t._s(t.curSym)+t._s(s.cur_fee))]),e("el-tooltip",{attrs:{"popper-class":"tooltip-box",placement:"top"}},[e("span",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e("img",{staticClass:"pic",attrs:{src:s.pic,alt:""}}),e("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(s.desc))])]),e("a-icon",{staticStyle:{"font-size":"18px",color:"#bbb"},attrs:{type:"question-circle",theme:"filled"}})],1)],1)})),0)],1)],1),e("div",{staticClass:"logistics"},[e("h3",[t._v(t._s(t.$t("ordertosend_logistics")))]),e("a-spin",{staticClass:"logistics-box",attrs:{spinning:t.isLoading}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSelect,expression:"!isSelect"}]},[t._l(t.calcArr,(function(s){return e("div",{key:s.id},[e("estimateCard",{style:{"border-color":s.id===t.selectedRows.id?"#ff2840":"","background-color":s.id===t.selectedRows.id?"#f8f8f8":""},attrs:{estimateData:s,curSym:t.curSym,itemType:!0},on:{rowSelect:t.rowSelect}})],1)})),t._l(t.unusableCalcArr,(function(s){return e("div",{key:s.id},[e("estimateCard",{attrs:{estimateData:s,curSym:t.curSym,itemType:!1}})],1)}))],2),t.isSelect?e("div",[e("selectEstimateInfo",{attrs:{estimateData:t.selectedRows,curSym:t.curSym},on:{rowCancelSelect:t.rowSelect,selectInsurance:t.selectInsurance}})],1):t._e()])],1),e("h3",[t._v(t._s(t.$t("ordertosend_service_remark")))]),e("a-textarea",{staticClass:"remark-textarea",attrs:{placeholder:t.$t("ordertosend_service_remark_placeholder"),rows:"4"},model:{value:t.toSendRemark,callback:function(e){t.toSendRemark=e},expression:"toSendRemark"}})],1),e("div",{staticClass:"judge"}),e("div",{staticClass:"submit-banner",class:{isFixed:t.isFixed&&!t.isMobile}},[e("div",{staticClass:"coupon-conversion"},[t.isSelect?e("div",{staticClass:"coupon-input"},[e("span",[t._v(t._s(t.$t("pay_coupon")))]),e("a-input",{staticStyle:{width:"240px"},attrs:{placeholder:t.$t("pay_coupon_input")},model:{value:t.couponCode,callback:function(e){t.couponCode=e},expression:"couponCode"}}),e("a-spin",{attrs:{spinning:t.activating}},[e("button",{on:{click:t.handleConversion}},[t._v(t._s(t.$t("pay_coupon_exchange")))])])],1):e("div"),e("div",[e("a-checkbox",{model:{value:t.taxRisks,callback:function(e){t.taxRisks=e},expression:"taxRisks"}},[t._v(t._s(t.$t("ordertosend_risks")))]),e("el-tooltip",{attrs:{"popper-class":"tooltip-fee",placement:"top"}},[e("div",{staticClass:"fee-box",attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("ordertosend_risks_tax_tooltip"))+" ")]),e("span",{staticClass:"risks-tooltip"},[t._v(t._s(t.$t("ordertosend_risks_tax")))])]),e("span",[t._v(" ")]),e("el-tooltip",{attrs:{"popper-class":"tooltip-fee",placement:"top"}},[e("div",{staticClass:"fee-box",attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("ordertosend_risks_logistics_tooltip"))+" ")]),e("span",{staticClass:"risks-tooltip"},[t._v(t._s(t.$t("ordertosend_risks_logistics")))])])],1)]),e("div",{staticClass:"total"},[e("div",{staticClass:"estimate-weight-box"},[t.isSelect?e("div",{staticClass:"estimate-weight"},[t._v(" "+t._s(t.$t("ordertosend_estimate_weight"))+" "),e("el-tooltip",{attrs:{"popper-class":"tooltip-fee",placement:"top"}},[e("div",{staticClass:"fee-box",attrs:{slot:"content"},slot:"content"},[e("div",[t._v(" "+t._s(t.$t("ordertosend_estimate_weight_tip"))+" ")])]),e("a-icon",{attrs:{type:"question-circle"}})],1),t._v("   "),e("span",[t._v(t._s(t.selectedRows.bill_weight)+" g")])],1):t._e()]),e("div",{staticClass:"total-box"},[t.isSelect&&Object.keys(t.selectedEstimateInfo).length?e("div",{staticClass:"amount-box"},[e("span",{staticClass:"amount"},[t._v(" "+t._s(t.curSym)+t._s(t.selectedEstimateInfo.v2_pay_info.cur_pay_money)+" ")]),e("el-tooltip",{attrs:{"popper-class":"tooltip-fee",placement:"top"}},[e("div",{staticClass:"fee-box",attrs:{slot:"content"},slot:"content"},t._l(t.totalFeeInfos,(function(s,i){return e("p",{key:i},[e("span",[t._v(t._s(s.name))]),e("span",[e("span",{directives:[{name:"show",rawName:"v-show",value:s.isDiscount,expression:"item.isDiscount"}]},[t._v("-")]),t._v(" "+t._s(t.curSym)+t._s(s.cur_money)+" ")])])})),0),e("a-icon",{staticStyle:{"margin-right":"12px"},attrs:{type:"question-circle"}})],1)],1):t._e(),Object.keys(t.selectedEstimateInfo).length&&t.isSelect?e("couponSelect",{ref:"couponSelectRef",attrs:{curSym:t.curSym,selectedEstimateInfo:t.selectedEstimateInfo},on:{useCoupon:t.useCoupon}}):t._e(),e("a-spin",{attrs:{spinning:t.submitIng}},[e("button",{staticClass:"submit-btn",on:{click:function(e){return t.handleSubmit()}}},[t._v(" "+t._s(t.$t("ordertosend_submit"))+" ")])])],1)])])]),e("common-footer")],1)},a=[],n=(s("14d9"),s("e9f5"),s("ab43"),s("5087"),s("ed2f")),o=s("cc33"),c=s("c40e"),r=s("cbfe"),l=s("d9a2"),d=s("46bb"),_=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"estimateCard"}},[e("div",{class:t.itemType?"":"unusable"}),e("div",{staticClass:"card",on:{click:t.showDetail}},[e("div",{staticClass:"logo"},[e("div",{staticClass:"logo-img-box"},[e("el-image",{staticClass:"logo-img",attrs:{src:t.estimateData.logo}}),e("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.estimateData.insurance_info,expression:"estimateData.insurance_info"}],attrs:{placement:"top-start"}},[e("template",{slot:"content"},[e("insuranceToolTip",{attrs:{insuranceList:t.insuranceTypeList}})],1),e("i",{staticClass:"insurance-img"})],2)],1),e("span",[t._v(t._s(t.estimateData.name))])]),e("span",{staticClass:"cost"},[e("div",{staticClass:"transport"},[e("span",[t._v(t._s(t.$t("estimate_shipping")))])]),t.estimateData.calc_fee_list?e("div",{staticClass:"price transport"},[e("span",{staticClass:"cuy"},[t._v(t._s(t.curSym)+t._s(t.calcFee.total_fee))])]):t._e(),e("el-tooltip",{attrs:{placement:"right","popper-class":"fee-detail-tooltip"}},[e("template",{slot:"content"},[e("div",{staticClass:"price-detail"},t._l(t.feeInfos,(function(s){return e("p",{key:s.name},[e("span",[t._v(t._s(s.name))]),e("span",[e("span",{directives:[{name:"show",rawName:"v-show",value:s.isDiscount,expression:"item.isDiscount"}]},[t._v("-")]),t._v(" "+t._s(t.curSym)+t._s(s.cur_money)+" ")])])})),0)]),e("span",[t._v(t._s(t.$t("ordertosend_logistics_estimate_card_detail")))])],2),e("div",{directives:[{name:"show",rawName:"v-show",value:Number(t.estimateData.bill_weight)>Number(t.estimateData.true_weight),expression:"Number(estimateData.bill_weight) > Number(estimateData.true_weight)"}]},[e("span",[t._v(" "+t._s(t.$t("estimate_tooltip_text"))+" ")]),e("el-tooltip",{attrs:{placement:"right"}},[e("template",{slot:"content"},[e("h3",{staticStyle:{color:"#fff"}},[t._v(" "+t._s(t.$t("estimate_tooltip_vw"))+" "),e("span",[t._v(t._s(t.estimateData.bill_weight))]),t._v("g ")]),e("div",{staticStyle:{display:"flex","flex-direction":"column"}},[e("span",[t._v("· "+t._s(t.$t("estimate_tooltip_title1")))]),e("span",[t._v("· "+t._s(t.$t("estimate_tooltip_title2")))]),e("span",[t._v("· "+t._s(t.$t("estimate_tooltip_title3"))+t._s(t.estimateData.vpercent))])])]),e("a-icon",{attrs:{type:"question-circle",theme:"filled"}})],2)],1)],1),e("span",{staticClass:"cycle"},[e("div",{staticClass:"transport"},[e("span",[t._v(t._s(t.$t("estimate_aging")))])]),e("span",{staticClass:"cycle-text",attrs:{title:t.estimateData.cycle}},[t._v(t._s(t.estimateData.cycle))])]),e("span",{staticClass:"feature"},[e("span",{staticClass:"feature-content"},[t._v(t._s(t.estimateData.feature))])]),e("button",{staticClass:"select-btn",class:t.itemType?"":"un-btn",on:{click:function(e){return e.stopPropagation(),t.rowSelect.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("ordertosend_logistics_estimate_card_select"))+" ")])]),t._l(t.estimateData.err_msg_arr,(function(s,i){return e("div",{key:i,staticClass:"errmsg"},[e("span",[t._v(t._s(s))])])})),e("orderToSendTableCart",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],attrs:{estimateInfo:t.estimateData,curSym:t.curSym}})],2)},u=[],p=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"order-to-send-table-cart"}},[e("div",{staticClass:"detail"},[e("div",{staticClass:"top"},[e("div",{staticClass:"cost-detail"},[e("p",[t._v(t._s(t.$t("estimate_cost_detail")))]),e("table",[e("tbody",[e("tr",[e("td",{staticClass:"td-ext1",attrs:{colspan:"4"}},[t._v(t._s(t.$t("estimate_cost_international_shipping")))]),e("td",{staticClass:"td-ext2",attrs:{rowspan:"2"}},[t._v(t._s(t.$t("estimate_cost_operate_fees")))])]),e("tr",{staticClass:"cost-title"},[e("td",[t._v(t._s(t.$t("estimate_cost_first_freight")))]),e("td",[t._v(t._s(t.$t("estimate_cost_renewed_freight")))]),e("td",[t._v(t._s(t.$t("estimate_cost_process_fees")))]),e("td",[t._v(t._s(t.$t("estimate_cost_fuel_surcharge")))])]),e("tr",{staticClass:"cost-num"},[e("td",[t._v(t._s(t.curSym)+t._s(t.calcFee.first_fee))]),e("td",[t._v(t._s(t.curSym)+t._s(t.calcFee.continue_fee))]),e("td",[t._v(t._s(t.curSym)+t._s(t.calcFee.server_fee))]),e("td",[t._v(t._s(t.curSym)+t._s(t.calcFee.fuel_fee))]),e("td",[t._v(t._s(t.curSym)+t._s(t.calcFee.operation_fee))])])])])]),e("div",{staticClass:"standard"},[e("p",[t._v(t._s(t.$t("estimate_standard")))]),e("table",[e("tbody",[e("tr",{staticClass:"standard-title"},[e("td",[t._v(t._s(t.$t("estimate_standard_first_price")))]),e("td",[t._v(t._s(t.$t("estimate_standard_renewed_price")))])]),e("tr",{staticClass:"standard-num"},[e("td",[t._v(t._s(t.curSym)+t._s(t.estimateInfo.first_fee)+"/"+t._s(t.estimateInfo.first_weight)+"g")]),e("td",[t._v(t._s(t.curSym)+t._s(t.estimateInfo.continue_fee)+"/"+t._s(t.estimateInfo.continue_weight)+"g")])])])])])]),e("div",{staticClass:"characteristic"},[e("p",[t._v(t._s(t.$t("estimate_line_characteristics")))]),e("span",[t._v(t._s(t.estimateInfo.feature))]),e("p",[t._v(t._s(t.$t("estimate_mailing_restrictions")))]),e("span",[t._v(t._s(t.estimateInfo.ban))])])])])},m=[],h={name:"OrderToSendTableCart",props:["estimateInfo","curSym"],computed:{calcFee(){return this.estimateInfo.calc_fee_list}}},v=h,f=(s("4e89"),s("2877")),g=Object(f["a"])(v,p,m,!1,null,"1c558236",null),y=g.exports,C=s("00d9"),b={name:"EstimateCard",props:{estimateData:{type:Object},itemType:{type:Boolean,default:!0},curSym:{type:String,default:"￥"}},components:{orderToSendTableCart:y,insuranceToolTip:C["a"]},data(){return{isShow:!1}},computed:{calcFee(){return this.estimateData.calc_fee_list?this.estimateData.calc_fee_list:{}},feeInfos(){let t=this.estimateData.v2_dis_infos_send.map(t=>({...t,isDiscount:!0}));return[...this.estimateData.v2_fee_infos,...t]},insuranceTypeList(){let t=[];return this.estimateData.insurance_info&&(t=this.estimateData.insurance_info.type_list),t}},watch:{estimateData(){this.isShow=!1}},methods:{showDetail(){this.itemType&&(this.isShow=!this.isShow)},rowSelect(){this.itemType&&this.$emit("rowSelect",{data:this.estimateData,isSelect:!0})}}},w=b,S=(s("7bf2"),Object(f["a"])(w,_,u,!1,null,"e9340b40",null)),I=S.exports,$=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"estimateCard"}},[e("div",{staticClass:"card"},[e("div",{staticClass:"logo"},[e("div",{staticClass:"logo-img-box"},[e("el-image",{staticClass:"logo-img",attrs:{src:t.estimateData.logo}})],1),e("span",[t._v(t._s(t.estimateData.name))])]),e("span",{staticClass:"cost"},[e("div",{staticClass:"transport"},[e("span",[t._v(t._s(t.$t("estimate_shipping")))])]),t.estimateData.calc_fee_list?e("div",{staticClass:"price transport"},[e("span",{staticClass:"cuy"},[t._v(t._s(t.curSym)+t._s(t.calcFee.total_fee))])]):t._e(),e("el-tooltip",{attrs:{placement:"right","popper-class":"fee-detail-tooltip"}},[e("template",{slot:"content"},[e("div",{staticClass:"price-detail"},t._l(t.feeInfos,(function(s){return e("p",{key:s.name},[e("span",[t._v(t._s(s.name))]),e("span",[e("span",{directives:[{name:"show",rawName:"v-show",value:s.isDiscount,expression:"item.isDiscount"}]},[t._v("-")]),t._v(" "+t._s(t.curSym)+t._s(s.cur_money)+" ")])])})),0)]),e("span",[t._v(t._s(t.$t("ordertosend_logistics_estimate_card_detail")))])],2),e("div",{directives:[{name:"show",rawName:"v-show",value:Number(t.estimateData.bill_weight)>Number(t.estimateData.true_weight),expression:"Number(estimateData.bill_weight) > Number(estimateData.true_weight)"}]},[e("span",[t._v(" "+t._s(t.$t("estimate_tooltip_text"))+" ")]),e("el-tooltip",{attrs:{placement:"right"}},[e("template",{slot:"content"},[e("h3",{staticStyle:{color:"#fff"}},[t._v(" "+t._s(t.$t("estimate_tooltip_vw"))+" "),e("span",[t._v(t._s(t.estimateData.bill_weight))]),t._v("g ")]),e("div",{staticStyle:{display:"flex","flex-direction":"column"}},[e("span",[t._v("· "+t._s(t.$t("estimate_tooltip_title1")))]),e("span",[t._v("· "+t._s(t.$t("estimate_tooltip_title2")))]),e("span",[t._v("· "+t._s(t.$t("estimate_tooltip_title3"))+t._s(t.estimateData.vpercent))])])]),e("a-icon",{attrs:{type:"question-circle",theme:"filled"}})],2)],1)],1),e("span",{staticClass:"cycle"},[e("div",{staticClass:"transport"},[e("span",[t._v(t._s(t.$t("estimate_aging")))])]),e("span",{staticClass:"cycle-text",attrs:{title:t.estimateData.cycle}},[t._v(t._s(t.estimateData.cycle))])]),e("span",{staticClass:"feature"},[e("span",{staticClass:"feature-content"},[t._v(t._s(t.estimateData.feature))])]),e("button",{staticClass:"select-btn",on:{click:function(e){return e.stopPropagation(),t.rowCancelSelect.apply(null,arguments)}}},[t._v(t._s(t.$t("ordertosend_change_select")))])]),t._l(t.estimateData.err_msg_arr,(function(s,i){return e("div",{key:i,staticClass:"errmsg"},[e("span",[t._v(t._s(s))])])})),t.insurance?e("div",{staticClass:"insurance"},[e("h3",[e("span",[t._v(t._s(t.$t("ordertosend_insurance_buy")))]),e("a-switch",{on:{change:t.handleSwitch},model:{value:t.isInsurance,callback:function(e){t.isInsurance=e},expression:"isInsurance"}})],1),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.isInsurance,expression:"!isInsurance"}],staticClass:"un-insurance-tip"},[t._v(t._s(t.$t("ordertosend_insurance_no_buy_tip")))]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isInsurance,expression:"isInsurance"}]},[e("div",{staticClass:"insurance-fee-box"},[e("div",{staticClass:"insurance-fee"},[e("span",{staticClass:"fee-label"},[t._v(t._s(t.$t("ordertosend_insurance_fee")))]),e("h1",[t._v(t._s(t.curSym)+" "+t._s(t.insurance.cur_insurance_fee))]),e("span",{staticClass:"insurance-rate"},[t._v(t._s(t.$t("ordertosend_insurance_rate"))+t._s(t.insuranceRate))])]),e("div",{staticClass:"insurance-fee"},[e("span",{staticClass:"fee-label"},[t._v(t._s(t.$t("ordertosend_insurance_product_amount")))]),e("h3",[t._v(t._s(t.curSym)+" "+t._s(t.insurance.cur_product_insured_amount))])]),e("div",{staticClass:"insurance-fee"},[e("span",{staticClass:"fee-label"},[t._v(t._s(t.$t("ordertosend_insurance_shipping_amount")))]),e("h3",[t._v(t._s(t.curSym)+" "+t._s(t.insurance.cur_shipping_insured_amount))])]),e("div",{staticClass:"insurance-fee insurance-type"},[e("span",{staticClass:"fee-label"},[t._v(t._s(t.$t("ordertosend_insurance_type")))]),t.insurance.type_list?e("div",{staticClass:"type-box"},t._l(t.insurance.type_list,(function(s){return e("h3",{key:s.type},[e("span",[t._v(t._s(s.title))]),e("el-tooltip",{attrs:{placement:"right"}},[e("template",{slot:"content"},[e("h4",{staticStyle:{color:"#eee",width:"320px","white-space":"pre-wrap"}},[t._v(" "+t._s(s.content)+" ")])]),e("a-icon",{attrs:{type:"question-circle"}})],2)],1)})),0):t._e()])]),e("p",{staticClass:"disclaimer-extra"},[t._v(" "+t._s(t.$t("ordertosend_insurance_disclaimer_extra"))+" "),e("router-link",{staticClass:"desc-link",attrs:{to:{path:"/service/help/question",query:{id:123}},target:"_blank"}},[t._v(t._s(t.$t("ordertosend_insurance_disclaimer_extra_link")))])],1),e("div",{staticClass:"disclaimer"},[e("h4",[t._v(t._s(t.$t("ordertosend_insurance_disclaimer")))]),t._l(t.insurance.type_list,(function(s,i){return e("div",{key:i},[t._v(" "+t._s(i+1)+"、"+t._s(t.disclaimerMap[s.type])+" ")])}))],2)])]):t._e()],2)},x=[],k={name:"EstimateCard",props:{estimateData:{type:Object,default:{}},curSym:{type:String,default:"￥"}},data(){return{isInsurance:!0}},computed:{calcFee(){return this.estimateData.calc_fee_list?this.estimateData.calc_fee_list:{}},feeInfos(){let t=this.estimateData.v2_dis_infos_send.map(t=>({...t,isDiscount:!0}));return[...this.estimateData.v2_fee_infos,...t]},insurance(){return this.estimateData.insurance_info},insuranceRate(){let t=Number(this.insurance.rate);return t=100*t+"%",t},disclaimerMap(){const t={1:this.$t("ordertosend_insurance_disclaimer_1"),2:this.$t("ordertosend_insurance_disclaimer_2"),3:this.$t("ordertosend_insurance_disclaimer_3")};return t}},methods:{rowCancelSelect(){this.$emit("rowCancelSelect",{data:{},isSelect:!1})},handleSwitch(){this.$emit("selectInsurance",this.isInsurance)}}},D=k,A=(s("74c8"),Object(f["a"])(D,$,x,!1,null,"6fa526f6",null)),R=A.exports,T=s("0c9e"),O=s("bba4"),j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"coupon-select"},[e("el-select",{staticClass:"coupon-select-row",attrs:{placeholder:t.$t("center_my_order_refund_placeholder")},on:{change:e=>t.$emit("useCoupon",e)},model:{value:t.couponId,callback:function(e){t.couponId=e},expression:"couponId"}},t._l(t.couponList,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.how_use}})})),1)],1)},E=[],N={props:{selectedEstimateInfo:{type:Object,default:()=>{}},curSym:"￥"},data(){return{couponId:0}},computed:{couponList(){let t=this.selectedEstimateInfo.coupon_list||[],e=[{id:0,how_use:"Nonuse"},...t];return e}},mounted(){},methods:{initCouponList(t){this.couponId=t,this.$forceUpdate()}}},F=N,L=(s("19f1"),Object(f["a"])(F,j,E,!1,null,"22141a0a",null)),q=L.exports,P={name:"OrderToSend",data(){return{isRehearsal:!1,goodsIds:null,info:{},rehearsalId:"",isFixed:!0,addressArr:[],goodsLoading:!1,goodsInfos:[],removeTag:!1,removePackaging:!1,serviceConfigsArr:[],selectedRows:{},services:[],toSendRemark:"",selectAddress:"",curSym:"",calcArr:[],unusableCalcArr:[],isLoading:!1,submitIng:!1,isSelect:!1,isInsurance:!1,selectedEstimateInfo:{},totalFeeInfos:[],usedCoupon:1,couponCode:"",activating:!1,taxRisks:!1}},components:{commonHeader:l["a"],commonFooter:d["a"],estimateCard:I,selectEstimateInfo:R,waybillAddress:T["a"],goodsCommodities:O["a"],couponSelect:q},computed:{isMobile(){let t=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/);return t}},created(){const{ids:t,rid:e}=this.$route.query;if(t){let e=Object(o["d"])(t);this.goodsIds=e?JSON.parse(e):[]}else if(e){let t=Object(o["d"])(e);this.info=t?JSON.parse(t):{},this.isRehearsal=!0}},mounted(){this.getServiceConfigs(),window.addEventListener("scroll",this.handleScroll)},methods:{handleScroll(){let t=document.documentElement.offsetHeight,e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,s=document.querySelector(".judge").offsetTop||0,i=t+e;this.isFixed=i<s},addressChange(t){this.addressArr=t.addressArr,t.selectAddress&&0!==this.goodsInfos.length?(this.selectAddress=t.selectAddress,this.getCalc()):(this.isRehearsal,this.isDefaultAddress())},isDefaultAddress(){0!==this.addressArr.length&&0!==this.goodsInfos.length&&(this.selectAddress=this.addressArr[0].id,this.getCalc())},serviceChange(t){this.services=t,""!==this.selectAddress&&this.getCalc()},initAnalyze(t){this.goodsInfos=t,this.isDefaultAddress()},onAnalyze(t){this.goodsInfos=t},getServiceConfigs(){Object(n["j"])().then(t=>{this.curSym=t.data.cur_sym,this.serviceConfigsArr=t.data.list,this.isRehearsal&&(this.services=this.info.services_list.map(t=>t.code))})},getCalc(){let t={goodsInfos:this.isRehearsal?[]:this.goodsInfos,services:this.isRehearsal?[]:this.services,addressId:this.selectAddress,rehearsalId:this.info.id||"",insurance:1,tmplId:""};this.isLoading=!0,this.selectedRows={},this.isInsurance=!1,this.isSelect=!1,Object(c["j"])(t).then(t=>{this.curSym=t.data.curSym,this.calcArr=t.data.list,this.unusableCalcArr=t.data.list_unusable,this.isLoading=!1,this.$forceUpdate()}).catch(()=>{this.isRehearsal&&this.$warning({title:"",content:this.$t("ordertosend_logistics_err_message"),okType:"danger",okText:"Confirm",cancelButtonProps:{style:{display:"none"}},autoFocusButton:null,centered:!0,keyboard:!1,onOk:()=>{this.$router.push({path:"/center/rehearsal"})}}),this.isLoading=!1})},rowSelect(t){this.selectedRows=t.data,this.isSelect=t.isSelect,this.isInsurance=!!this.selectedRows.insurance_info,this.isFixed=!t.isSelect,this.isSelect&&(this.usedCoupon=1,this.getSelectedEstimateInfo())},selectInsurance(t){this.isInsurance=t,this.getSelectedEstimateInfo()},handleConversion(){if(""===this.couponCode)return this.$message.warning(this.$t("pay_coupon_empty_code"));const t={code:this.couponCode};this.activating=!0,Object(r["a"])(t).then(t=>{this.$message.success(this.$t("pay_coupon_exchange_success")),this.couponCode="",this.getSelectedEstimateInfo()}).finally(t=>{this.activating=!1})},useCoupon(t){this.usedCoupon=t,this.getSelectedEstimateInfo()},getSelectedEstimateInfo(){const t={goodsInfos:this.isRehearsal?[]:this.goodsInfos,services:this.isRehearsal?[]:this.services,addressId:this.selectAddress,rehearsalId:this.info.id||"",tmplId:this.selectedRows.id,remark:this.toSendRemark,estimateOnly:1,insurance:this.isInsurance?1:0,couponId:this.usedCoupon};this.submitIng=!0,Object(c["j"])(t).then(t=>{this.selectedEstimateInfo=t.data;const{v2_dis_infos:e,v2_ex_fee_infos:s,v2_fee_infos:i,v2_pay_info:a,v2_dis_infos_send:n}=this.selectedEstimateInfo;let o=n.map(t=>({...t,isDiscount:!0})),c=e.map(t=>({...t,isDiscount:!0}));this.totalFeeInfos=[...i,...s,...c,...o],this.$nextTick(()=>{const{used_coupon_id:t}=a;this.usedCoupon=t,this.$refs.couponSelectRef.initCouponList(t)})}).finally(()=>{this.submitIng=!1})},handleSubmit(){let t=this.selectedRows.id;if(""===t||!t)return this.$message.warning("Please select an logistics");if(!this.taxRisks)return this.$message.warning("请阅读并同意后操作");let e={goodsInfos:this.isRehearsal?[]:this.goodsInfos,services:this.isRehearsal?[]:this.services,addressId:this.selectAddress,rehearsalId:this.info.id||"",tmplId:t,remark:this.toSendRemark,estimateOnly:0,insurance:this.isInsurance?1:0,couponId:this.usedCoupon};this.submitIng=!0,Object(c["j"])(e).then(t=>{let e=t.data.tradesn;this.submitIng=!1,this.$router.push({path:"/pay",query:{key:e}})}).catch(t=>{this.submitIng=!1})}},destroyed(){window.removeEventListener("scroll",this.handleScroll)}},z=P,B=(s("264a"),Object(f["a"])(z,i,a,!1,null,"724f0195",null));e["default"]=B.exports},"3a52":function(t,e,s){},"4e89":function(t,e,s){"use strict";s("3a52")},6601:function(t,e,s){},"74c8":function(t,e,s){"use strict";s("dd0d")},"7bf2":function(t,e,s){"use strict";s("16090")},bddc:function(t,e,s){},d786:function(t,e,s){},dd0d:function(t,e,s){},f3b1:function(t,e,s){"use strict";s("6601")}}]);