(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sub_center_packge~sub_ordertosend_packge"],{"0123":function(e,t,s){"use strict";s("5969")},"0c9e":function(e,t,s){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"submit-waybill-address"}},[t("div",{staticClass:"address-list"},[t("div",{staticClass:"address-header"},[t("h3",{style:"font-size:"+e.titleSize},[e._v(" "+e._s(e.$t("ordertosend_address"))+" ")]),t("div",{staticClass:"address-btn-box"},[t("div",{staticClass:"show-address-arr",on:{click:e.switchShowAddressArr}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.isShowAddressArr,expression:"isShowAddressArr"}]},[e._v(" "+e._s(e.$t("ordertosend_address_hidden"))+" "),t("a-icon",{attrs:{type:"up"}})],1),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.isShowAddressArr,expression:"!isShowAddressArr"}]},[e._v(" "+e._s(e.$t("ordertosend_address_show"))+" "),t("a-icon",{attrs:{type:"down"}})],1)]),t("button",{staticClass:"address-btn",on:{click:e.createAddress}},[e._v(" +"+e._s(e.$t("ordertosend_address_add"))+" ")])])]),t("div",{staticClass:"current-address"},[t("div",{directives:[{name:"show",rawName:"v-show",value:0!==Object.keys(e.currentAddress).length,expression:"Object.keys(currentAddress).length !== 0"}],staticClass:"current-address-info"},[t("span",{staticClass:"consignee"},[t("p",[t("span",{staticClass:"consignee-name"},[e._v(e._s(e.currentAddress.consignee)+" ")]),e._v(" "+e._s(e.currentAddress.telephone)+"   "+e._s(e.currentAddress.zipcode)+" ")]),t("div",[e._v(" "+e._s(e.currentAddress.area_name)+" "),t("span",{directives:[{name:"show",rawName:"v-show",value:""!==e.currentAddress.region_str,expression:"currentAddress.region_str !== ''"}]},[e._v(" "+e._s(e.currentAddress.region_str)+" ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:""===e.currentAddress.region_str,expression:"currentAddress.region_str === ''"}],staticClass:"not-fill"},[e._v(" Not filled ")]),""!==e.currentAddress.city?t("span",[e._v(" "+e._s(e.currentAddress.city)+" ")]):t("span",{staticClass:"not-fill"},[e._v(" Not filled ")]),e._v(" "+e._s(e.currentAddress.address)+" ")])]),t("button",{staticClass:"edit-btn",on:{click:function(t){return t.stopPropagation(),e.handleEditAddress(e.currentAddress)}}},[t("a-icon",{attrs:{type:"form"}}),e._v(" "+e._s(e.$t("ordertosend_address_edit"))+" ")],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:0===Object.keys(e.currentAddress).length,expression:"Object.keys(currentAddress).length === 0"}],staticClass:"empty-address"},[t("span",[e._v(e._s(e.$t("ordertosend_address_select_empty")))]),t("button",{on:{click:e.createAddress}},[e._v(" "+e._s(e.$t("ordertosend_address_select_btn"))+" ")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowAddressArr,expression:"isShowAddressArr"}],staticClass:"address-item"},[t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.addressArr.length,expression:"addressArr.length === 0"}],staticClass:"address-arr-empty"},[e._v(" "+e._s(e.$t("ordertosend_address_arr_empty"))+" ")]),t("a-table",{ref:"table",attrs:{columns:e.columns,"data-source":e.addressArr,rowKey:e=>e.id,pagination:!1,rowSelection:{type:"radio",selectedRowKeys:e.selectRowKey,onChange:e.addressChange},customRow:e.rowSelect},scopedSlots:e._u([{key:"consignee",fn:function(s,r){return t("span",{staticClass:"consignee"},[t("p",[e._v(e._s(s))]),t("span",[e._v(" "+e._s(r.telephone)+"   "+e._s(r.zipcode)+"  ")])])}},{key:"region",fn:function(s){return[t("span",{directives:[{name:"show",rawName:"v-show",value:""===s,expression:"text === ''"}],staticClass:"not-fill"},[e._v("Not filled")]),t("span",{directives:[{name:"show",rawName:"v-show",value:""!==s,expression:"text !== ''"}]},[e._v(e._s(s))])]}},{key:"city",fn:function(s){return[t("span",{directives:[{name:"show",rawName:"v-show",value:""===s,expression:"text === ''"}],staticClass:"not-fill"},[e._v("Not filled")]),t("span",{directives:[{name:"show",rawName:"v-show",value:""!==s,expression:"text !== ''"}]},[e._v(e._s(s))])]}},{key:"address",fn:function(s,r){return t("span",{},[t("div",[e._v(e._s(r.address))])])}},{key:"option",fn:function(s,r){return t("span",{staticClass:"option-list"},[t("div",{staticClass:"btn-box"},[t("button",{on:{click:function(t){return t.stopPropagation(),e.handleEditAddress(r)}}},[e._v(" "+e._s(e.$t("ordertosend_address_edit"))+" ")]),t("button",{on:{click:function(t){return t.stopPropagation(),e.handleDeleteAddress(r)}}},[e._v(" "+e._s(e.$t("ordertosend_address_delete"))+" ")])])])}}])})],1)]),2750==e.changeAreaId?t("div",{staticClass:"address_tips"},[t("div",{staticClass:"address_tips_title"},[e._v(" "+e._s(e.$t("delivery_information_must"))+" ")])]):e._e(),t("AddressModal",{ref:"addressModal",on:{confirm:e.assignData}})],1)},o=[],i=(s("14d9"),s("e9f5"),s("7d54"),s("2f94")),n=s("ee24"),a={name:"SubmitWaybillAddress",props:{titleSize:{default:"18px"}},components:{AddressModal:n["a"]},data(){return{changeAreaId:"",addressArr:[],selectAddress:"",isShowAddressArr:!1,selectRowKey:[]}},computed:{currentAddress(){let e={};return""!==this.selectAddress&&this.addressArr.forEach(t=>{t.id===this.selectAddress&&(e=t)}),this.changeAreaId=e.area_id,e},columns(){let e=[{title:this.$t("ordertosend_address_columns_consignee"),dataIndex:"consignee",slots:{title:"customTitle"},scopedSlots:{customRender:"consignee"},width:"20%",ellipsis:!0},{title:this.$t("ordertosend_address_columns_country"),dataIndex:"area_name"},{title:this.$t("ordertosend_address_columns_region"),dataIndex:"region_str",scopedSlots:{customRender:"region"}},{title:this.$t("ordertosend_address_columns_city"),dataIndex:"city",scopedSlots:{customRender:"city"}},{title:this.$t("ordertosend_address_columns_street"),scopedSlots:{customRender:"address"}},{title:this.$t("ordertosend_address_columns_action"),align:"center",scopedSlots:{customRender:"option"},width:"12%"}];return e}},mounted(){this.getAddressArr()},methods:{emitCalc(e){this.$emit("addressChange",{addressArr:this.addressArr,selectAddress:e})},assignData(e){const{data:t}=e;this.addressArr=t.list,this.emitCalc()},getAddressArr(){Object(i["c"])().then(async e=>{if(await this.assignData(e),0!==this.addressArr.length){let e=this.addressArr[0];if(this.selectRowKey.push(this.addressArr[0].id),""===e.region_str)return void this.$error({title:"Error tip",content:"In order to ensure the accurate delivery of the parcel to you, your address requires additional information on the region and city.",okType:"danger",cancelButtonProps:{style:{display:"none"}},autoFocusButton:null,centered:!0,width:"500px",onOk:()=>{this.handleEditAddress(e),this.$nextTick(()=>{this.$refs.ruleForm.validate()})}});this.selectAddress=e.id}})},addressChange(e,t){this.selectRowKey=e,this.selectAddress=t[0].id,this.isShowAddressArr=!1,this.emitCalc(this.selectAddress)},rowSelect(e){return{on:{click:()=>{this.selectRowKey=[],this.selectRowKey.push(e.id),this.selectAddress=this.selectRowKey[0],this.isShowAddressArr=!1,this.emitCalc(this.selectAddress)}}}},createAddress(){this.$nextTick(()=>{this.$refs.addressModal.createAddress()})},handleEditAddress(e){this.$nextTick(()=>{this.$refs.addressModal.editAddress(e)})},switchShowAddressArr(){this.isShowAddressArr=!this.isShowAddressArr},handleDeleteAddress(e){let t=this;this.$confirm({title:"Delete current address?",okText:"Confirm",okType:"danger",autoFocusButton:null,cancelText:"Cancel",centered:!0,onOk(){return new Promise((s,r)=>{const o=t.deleteAddress(e,s,r);return o}).catch(()=>{})}})},deleteAddress(e,t,s){const r={id:e.id};Object(i["b"])(r).then(e=>{this.$message.success("Delete Address success"),t(),this.assignData(e)}).catch(()=>{s()})},cancelReadOnly(e){this.$nextTick(()=>{if(!e){const{select:e}=this.$refs;if(e){const t=e.$el.querySelector(".el-input__inner");t.removeAttribute("readonly")}}})}}},d=a,c=(s("e987"),s("2877")),l=Object(c["a"])(d,r,o,!1,null,"7ca808a6",null);t["a"]=l.exports},"0ece":function(e,t,s){},"0fd3":function(e,t,s){"use strict";s("0ece")},"20d8":function(e,t,s){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"discount-detail"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.goodsDiscountInfo.discount,expression:"goodsDiscountInfo.discount"}],staticClass:"discount-item"},[t("img",{staticClass:"detail-icon",attrs:{src:e.$store.state.imageUrl+"/icon/bag_icon.png",alt:""}}),t("div",{staticClass:"detail-desc"},[e._v(" "+e._s(e.$t("item_details_discount"))+" "+e._s(e._f("numPercent")(e.goodsDiscountInfo.discount))+" ")])]),e.isOrder||e.sendDiscountInfo.discount?t("div",{staticClass:"discount-item"},[t("img",{staticClass:"detail-icon",attrs:{src:e.$store.state.imageUrl+"/icon/plane_icon.png",alt:""}}),t("div",{staticClass:"detail-desc"},[t("span",[e._v(e._s(e.$t("item_details_send_discount"))+"("+e._s(e.curSym)+e._s(e.curSendMoney)+")")]),e._v("  "),t("el-tooltip",{attrs:{placement:"right"}},[t("div",{staticStyle:{"max-width":"380px"},attrs:{slot:"content"},slot:"content"},[t("p",{directives:[{name:"show",rawName:"v-show",value:e.sendDiscountInfo.endTime,expression:"sendDiscountInfo.endTime"}]},[e._v(e._s(e.$t("item_details_send_discount_end"))+"："+e._s(e._f("formatDate")(e.sendDiscountInfo.endTime)))]),t("div",[e._v(e._s(e.$t("item_details_discount_rules"))+"：")]),t("i18n",{attrs:{path:"item_details_discount_rules_desc",tag:"li"}},[t("span",{attrs:{slot:"curSendMoney"},slot:"curSendMoney"},[e._v(e._s(e.curSym)+e._s(e.curSendMoney))]),t("span",{staticStyle:{color:"#ff2840"},attrs:{slot:"maxSendDiscount"},slot:"maxSendDiscount"},[e._v(e._s(e._f("numPercent")(e.sendDiscountInfo.max_send_discount)))])])],1),t("a-icon",{attrs:{type:"question-circle"}})],1)],1)]):e._e()])},o=[],i={props:{goodsDiscountInfo:{type:Object,default:()=>({})},sendDiscountInfo:{type:Object,default:()=>({})},isOrder:{default:()=>!1},curSym:{type:String,default:"￥"},curSendMoney:{type:Number,default:0}},filters:{numPercent(e){return 100*Number(e)+"%"}}},n=i,a=(s("0123"),s("2877")),d=Object(a["a"])(n,r,o,!1,null,"014e4d2f",null);t["a"]=d.exports},"4e33":function(e,t,s){},"50a7":function(e,t,s){},5969:function(e,t,s){},"7d3b":function(e,t,s){},afcb:function(e,t,s){"use strict";s("4e33")},bba4:function(e,t,s){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"goods-commodity"},[t("div",{staticClass:"goods-header"},[t("h3",{style:`font-size: ${e.titleSize};`},[e._v(e._s(e.$t("ordertosend_order")))]),t("div",{staticClass:"select-all-box"},[t("a-switch",{attrs:{size:"small",disabled:e.isRehearsal},on:{click:(t,s)=>e.removeAction(t,"remove_tag")},model:{value:e.remove_tag,callback:function(t){e.remove_tag=t},expression:"remove_tag"}}),t("span",{on:{click:function(t){return e.removeAction(!e.remove_tag,"remove_tag")}}},[e._v(" "+e._s(e.$t("ordertosend_order_table_remove_all_tag"))+" ")]),t("a-switch",{attrs:{size:"small",disabled:e.isRehearsal},on:{click:(t,s)=>e.removeAction(t,"remove_packaging")},model:{value:e.remove_packaging,callback:function(t){e.remove_packaging=t},expression:"remove_packaging"}}),t("span",{on:{click:function(t){return e.removeAction(!e.remove_packaging,"remove_packaging")}}},[e._v(" "+e._s(e.$t("ordertosend_order_table_remove_all_packaging"))+" ")])],1)]),t("a-table",{attrs:{columns:e.goodsColumns,"data-source":e.goodsArr,loading:e.goodsLoading,rowKey:e=>e.id,pagination:!1},scopedSlots:e._u([{key:"goodssn",fn:function(s,r){return[t("div",{staticClass:"goods-info"},[t("img",{staticClass:"goods-img",attrs:{src:r.goodsimg,alt:"Load failure"}}),t("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s))])])]}},{key:"goodsname",fn:function(s,r){return[t("div",{staticClass:"goods-name"},[t("span",[e._v(e._s(s))]),t("div",{directives:[{name:"show",rawName:"v-show",value:r.cur_send_dis_money,expression:"record.cur_send_dis_money"}]},[t("discountItem",{staticClass:"cart-discount",attrs:{sendDiscountInfo:r.send_discount_info,isOrder:!0,curSym:e.curSym,curSendMoney:r.cur_send_dis_money}})],1)])]}},{key:"action",fn:function(s,r){return[t("div",{staticClass:"table-action"},[t("p",[t("a-switch",{attrs:{size:"small",disabled:e.isRehearsal},on:{click:(t,s)=>e.removeAction(t,"remove_tag",r)},model:{value:r.remove_tag,callback:function(t){e.$set(r,"remove_tag",t)},expression:"record.remove_tag"}}),t("span",{on:{click:function(t){return e.removeAction(!r.remove_tag,"remove_tag",r)}}},[e._v(" "+e._s(e.$t("ordertosend_order_table_action_tag"))+" ")]),t("el-tooltip",{attrs:{"popper-class":"tooltip-box",placement:"top"}},[t("span",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[t("img",{attrs:{src:e.$store.state.imageUrl+"/remove_tag.jpg",alt:""}}),t("span",[e._v(e._s(e.$t("ordertosend_order_table_action_tag_tooltip")))])]),t("a-icon",{attrs:{type:"question-circle"}})],1)],1),t("p",[t("a-switch",{attrs:{size:"small",disabled:e.isRehearsal},on:{click:(t,s)=>e.removeAction(t,"remove_packaging",r)},model:{value:r.remove_packaging,callback:function(t){e.$set(r,"remove_packaging",t)},expression:"record.remove_packaging"}}),t("span",{on:{click:function(t){return e.removeAction(!r.remove_packaging,"remove_packaging",r)}}},[e._v(" "+e._s(e.$t("ordertosend_order_table_action_packaging"))+" ")]),t("el-tooltip",{attrs:{"popper-class":"tooltip-box",placement:"top"}},[t("span",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$t("ordertosend_order_table_action_packaging_tooltip"))+" ")]),t("a-icon",{attrs:{type:"question-circle"}})],1)],1)])]}}])})],1)},o=[],i=(s("14d9"),s("5087"),s("c40e")),n=s("cc33"),a=s("20d8"),d={props:{goodsIds:{default:()=>[]},titleSize:"20px"},components:{discountItem:a["a"]},data(){return{info:{},isRehearsal:!1,curSym:"",goodsArr:[],goodsLoading:!1,remove_tag:!1,remove_packaging:!1}},computed:{goodsColumns(){const e=[{title:this.$t("ordertosend_order_table_number"),width:"16%",dataIndex:"goodssn",scopedSlots:{customRender:"goodssn"},align:"center"},{title:this.$t("ordertosend_order_table_goodsname"),dataIndex:"goodsname",scopedSlots:{customRender:"goodsname"}},{title:this.$t("ordertosend_order_table_goodsnum"),width:"80px",dataIndex:"goodsnum",align:"center"},{title:this.$t("ordertosend_order_table_weight"),width:"100px",align:"center",dataIndex:"goodsweight"},{title:this.$t("ordertosend_order_table_volume"),width:"150px",align:"center",dataIndex:"goodsvolume",scopedSlots:{customRender:"goodsvolume"}},{title:this.$t("ordertosend_order_table_action"),width:"230px",align:"center",scopedSlots:{customRender:"action"}}];return e},goodsInfos(){let e=[];for(const t in this.goodsArr){let s=this.goodsArr[t],r={goodsId:s.id,removeTag:s.remove_tag,removePackaging:s.remove_packaging};e.push(r)}return e}},mounted(){const{ids:e,rid:t}=this.$route.query;if(e){let t=JSON.parse(Object(n["d"])(e));this.getGoodsList(t)}else if(t){let e=JSON.parse(Object(n["d"])(t));this.curSym=e.cur_sym,this.goodsArr=e.goods_list,this.isRehearsal=!0,this.assignGoodsInfos()}else this.getGoodsList()},methods:{getGoodsList(e){let t={goodsIds:e||this.goodsIds};this.goodsLoading=!0,Object(i["g"])(t).then(e=>{this.curSym=e.data.cur_sym,this.goodsArr=e.data.list,this.assignGoodsInfos(),this.goodsLoading=!1}).catch(e=>{this.goodsLoading=!1})},assignGoodsInfos(){this.$emit("initAnalyze",this.goodsInfos)},removeAction(e,t,s){if(!this.isRehearsal){if(s){this.$set(s,t,e);for(const e in this.goodsArr){let s=this.goodsArr[e];if(!s[t]){this[t]=!1;break}this[t]=!0}}else{this[t]=e;for(const s in this.goodsArr)this.$set(this.goodsArr[s],t,e)}this.$forceUpdate(),this.$emit("onAnalyze",this.goodsInfos)}}}},c=d,l=(s("0fd3"),s("2877")),u=Object(l["a"])(c,r,o,!1,null,"18e93dd3",null);t["a"]=u.exports},c40e:function(e,t,s){"use strict";s.d(t,"g",(function(){return o})),s.d(t,"e",(function(){return i})),s.d(t,"j",(function(){return n})),s.d(t,"q",(function(){return a})),s.d(t,"d",(function(){return d})),s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"l",(function(){return u})),s.d(t,"k",(function(){return m})),s.d(t,"s",(function(){return p})),s.d(t,"a",(function(){return _})),s.d(t,"m",(function(){return f})),s.d(t,"o",(function(){return h})),s.d(t,"p",(function(){return g})),s.d(t,"i",(function(){return v})),s.d(t,"n",(function(){return y})),s.d(t,"r",(function(){return b})),s.d(t,"h",(function(){return w})),s.d(t,"f",(function(){return A}));var r=s("4ec3");function o(e={}){return Object(r["a"])("/api/goods/index",e,!0)}function i(e={}){return Object(r["a"])("/api/goods/item",e,!0)}function n(e={}){return Object(r["a"])("/api/goods/toSend",e,!0)}function a(e={}){return Object(r["a"])("/api/goods/reply",e,!0)}function d(e={}){return Object(r["a"])("/api/goods/favoriteList",e,!0)}function c(e={}){return Object(r["a"])("/api/goods/favoriteAdd",e,!0)}function l(e={}){return Object(r["a"])("/api/goods/favoriteDel",e,!0)}function u(e={}){return Object(r["a"])("/api/goods/historyList",e,!0)}function m(e={}){return Object(r["a"])("/api/goods/historyDel",e,!0)}function p(e={}){return Object(r["a"])("/api/goods/typeList",e,!0)}function _(e={}){return Object(r["a"])("/api/goods/editExpress",e,!0)}function f(e={}){return Object(r["a"])("/api/goods/picList",e,!0)}function h(e={}){return Object(r["a"])("/api/goods/refundCause",e,!0)}function g(e={}){return Object(r["a"])("/api/goods/refundSubmit",e,!0)}function v(e={}){return Object(r["a"])("/api/goods/refundList",e,!0)}function y(e={}){return Object(r["a"])("/api/goods/refundCancel",e,!0)}function b(e={}){return Object(r["a"])("/api/goods/replyBot",e,!0)}function w(e={}){return Object(r["a"])("/api/goods/refundFilter",e,!0)}function A(e={}){return Object(r["a"])("/api/sapi/itemPostFee",e,!0)}},cbfe:function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return i}));var r=s("4ec3");function o(e={}){return Object(r["a"])("/api/coupon/index",e,!0)}function i(e={}){return Object(r["a"])("/api/coupon/activate",e,!0)}},e987:function(e,t,s){"use strict";s("7d3b")},ed2f:function(e,t,s){"use strict";s.d(t,"f",(function(){return o})),s.d(t,"g",(function(){return i})),s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"a",(function(){return d})),s.d(t,"j",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"b",(function(){return m})),s.d(t,"c",(function(){return p}));var r=s("4ec3");function o(e={}){return Object(r["a"])("/api/sendorder/index",e,!0)}function i(e={}){return Object(r["a"])("/api/sendorder/filter",e,!0)}function n(e={}){return Object(r["a"])("/api/sendorder/item",e,!0)}function a(e={}){return Object(r["a"])("/api/sendorder/reply",e,!0)}function d(e={}){return Object(r["a"])("/api/sendorder/cancel",e,!0)}function c(e={}){return Object(r["a"])("/api/sendorder/serviceConfigs",e,!0)}function l(e={}){return Object(r["a"])("/api/sendorder/del",e,!0)}function u(e={}){return Object(r["a"])("/api/sendorder/receipt",e,!0)}function m(e={}){return Object(r["a"])("/api/sendorder/commentList",e,!0)}function p(e={}){return Object(r["a"])("/api/sendorder/commentSubmit",e,!0)}},ee24:function(e,t,s){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"address-modal"},[t("a-modal",{attrs:{centered:"",title:e.formType,visible:e.visible,"confirm-loading":e.confirmLoading,width:900,okType:"danger",okText:e.$t("confirm_ok_text"),cancelText:e.$t("confirm_cancel_text")},on:{ok:e.handleSetAddress,cancel:e.handleCancel,click:function(t){e.popoverShow=!1}}},[t("a-form-model",{ref:"ruleForm",attrs:{model:e.formItem,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-model-item",{staticClass:"detail-address",attrs:{label:e.$t("center_account_address_form_consignee")}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"firstname"}},[t("a-input",{staticStyle:{width:"96%"},attrs:{placeholder:e.$t("center_account_address_form_first_name")},model:{value:e.formItem.firstname,callback:function(t){e.$set(e.formItem,"firstname",t)},expression:"formItem.firstname"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"consignee"}},[t("a-input",{attrs:{placeholder:e.$t("center_account_address_form_last_name")},model:{value:e.formItem.consignee,callback:function(t){e.$set(e.formItem,"consignee",t)},expression:"formItem.consignee"}})],1)],1)],1),t("a-form-model-item",{staticClass:"detail-address",attrs:{label:e.$t("center_account_address_form_country"),labelCol:{span:4},wrapperCol:{span:19},required:!0}},[t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{prop:"areaId"}},[t("el-select",{ref:"select",staticStyle:{width:"96%"},attrs:{size:"small",filterable:"",placeholder:e.$t("center_account_address_form_input_country")},on:{"hook:mounted":e.cancelReadOnly,"visible-change":e.cancelReadOnly,change:e.selectAreaChange},model:{value:e.formItem.areaId,callback:function(t){e.$set(e.formItem,"areaId",t)},expression:"formItem.areaId"}},e._l(e.areaList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.country_code+" - "+e.name,value:e.id}})})),1)],1)],1),t("a-col",{directives:[{name:"show",rawName:"v-show",value:!e.regionStr,expression:"!regionStr"}],attrs:{span:8}},[t("a-form-model-item",{attrs:{prop:"region"}},[t("el-select",{ref:"select",staticStyle:{width:"96%"},attrs:{size:"small",filterable:"",placeholder:e.$t("center_account_address_form_input_state"),disabled:""===e.formItem.areaId,"no-match-text":" "},on:{"hook:mounted":e.cancelReadOnly,"visible-change":e.cancelReadOnly,change:e.selectRegionChange},model:{value:e.regionField,callback:function(t){e.regionField=t},expression:"regionField"}},[e._l(e.regionList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),t("template",{slot:"empty"},[0===e.regionList.length?t("div",[t("a-input",{attrs:{placeholder:e.$t("please_select_not_found_placeholder")},model:{value:e.formItem.region,callback:function(t){e.$set(e.formItem,"region",t)},expression:"formItem.region"}})],1):e._e()]),t("a-input",{staticStyle:{width:"96%"},attrs:{placeholder:e.$t("please_select_not_found_placeholder")},on:{change:e.regionChange,pressEnter:e.regionChange},model:{value:e.formItem.region,callback:function(t){e.$set(e.formItem,"region",t)},expression:"formItem.region"}})],2)],1)],1),e.regionStr?t("a-col",{attrs:{span:8}},[t("a-form-model-item",[t("a-input",{staticStyle:{width:"96%"},attrs:{placeholder:"Please input region",value:e.regionStr,disabled:""}})],1)],1):e._e(),t("a-col",{attrs:{span:8}},[t("a-form-model-item",{attrs:{prop:"city"}},[t("a-popover",{attrs:{overlayStyle:{},visible:e.popoverShow,placement:"bottomLeft",getPopupContainer:e=>e.parentNode}},[t("template",{slot:"content"},[t("cityFilterPopoverContent",{attrs:{cityList:e.cityFilterList},on:{selectCity:e.selectCity}})],1),t("a-input",{ref:"cityInput",staticStyle:{width:"100%"},attrs:{placeholder:e.$t("center_account_address_form_input_city"),disabled:""===e.formItem.regionId&&""===e.formItem.region},on:{change:e.remoteMethod},model:{value:e.formItem.city,callback:function(t){e.$set(e.formItem,"city","string"===typeof t?t.trim():t)},expression:"formItem.city"}})],2)],1)],1)],1),t("a-form-model-item",{attrs:{label:e.$t("center_account_address_form_detailed_address"),prop:"address"}},[t("a-input",{attrs:{type:"textarea",placeholder:e.$t("center_account_address_form_detailed_detail")},on:{blur:function(t){return e.modalTip("address")}},model:{value:e.formItem.address,callback:function(t){e.$set(e.formItem,"address",t)},expression:"formItem.address"}})],1),t("a-form-model-item",{attrs:{label:e.$t("center_account_address_form_zip_code"),prop:"zipcode"}},[t("a-input",{attrs:{placeholder:e.$t("center_account_address_form_zip_code")},on:{blur:function(t){return e.modalTip("zipcode")}},model:{value:e.formItem.zipcode,callback:function(t){e.$set(e.formItem,"zipcode",t)},expression:"formItem.zipcode"}})],1),t("a-form-model-item",{attrs:{label:e.$t("center_account_address_form_phone"),prop:"telephone"}},[t("a-input",{attrs:{placeholder:e.$t("center_account_address_form_phone")},model:{value:e.formItem.telephone,callback:function(t){e.$set(e.formItem,"telephone",t)},expression:"formItem.telephone"}})],1),t("a-form-model-item",{attrs:{label:e.$t("center_account_address_form_default"),prop:"setAsDefault"}},[t("a-switch",{model:{value:e.formItem.setAsDefault,callback:function(t){e.$set(e.formItem,"setAsDefault",t)},expression:"formItem.setAsDefault"}})],1),t("a-form-model-item",{attrs:{label:" ",colon:!1}},[t("span",{staticClass:"info-tip"},[e._v(e._s(e.$t("center_account_address_form_info_tip")))])])],1)],1),t("a-modal",{attrs:{visible:e.showTip,centered:!0,width:410,okType:"danger",okText:e.$t("confirm_ok_text"),closable:!1,cancelButtonProps:{style:{display:"none"}}},on:{ok:function(t){e.showTip=!1}}},[t("span",{directives:[{name:"show",rawName:"v-show",value:"zipcode"===e.tipType,expression:"tipType === 'zipcode'"}],domProps:{innerHTML:e._s(this.zipTip)}}),t("span",{directives:[{name:"show",rawName:"v-show",value:"address"===e.tipType,expression:"tipType === 'address'"}]},[e._v(e._s(e.$t("center_account_address_form_address_tip")))])])],1)},o=[],i=(s("e9f5"),s("910d"),s("2f94")),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"city-filter"},[t("ul",e._l(e.cityList,(function(s){return t("li",{key:s.id,on:{click:function(t){return e.selectCity(s)}}},[e._v(" "+e._s(s.name)+" ")])})),0)])},a=[],d={props:{cityList:{type:Array,required:!0,default:[]}},methods:{selectCity(e){this.$emit("selectCity",{name:e.name})}}},c=d,l=(s("fc54"),s("2877")),u=Object(l["a"])(c,n,a,!1,null,"1ccaebc5",null),m=u.exports,p={name:"AddressModal",props:{},components:{cityFilterPopoverContent:m},data(){return{visible:!1,confirmLoading:!1,labelCol:{span:4},wrapperCol:{span:19},areaList:[],regionList:[],cityList:[],popoverShow:!1,cityFilterList:[],formType:"Create Address",formItem:{id:"",areaId:"",regionId:"",region:"",city:"",address:"",zipcode:"",telephone:"",setAsDefault:!1,consignee:"",firstname:""},regionStr:"",rules:{consignee:[{required:!0,message:"Last Name must be filled",trigger:"blur"}],firstname:[{required:!0,message:"First Name must be filled",trigger:"blur"}],areaId:[{required:!0,message:"Country must be selected",trigger:"change"}],region:[{validator:this.regionValidator,trigger:"change"}],city:[{required:!0,message:"City must be filled",trigger:"blur"}],address:[{required:!0,message:"Please input address",trigger:"blur"}],zipcode:[{required:!0,message:"Zip Code must be filled",trigger:"blur"}],telephone:[{required:!0,message:"Phone No. must be filled",trigger:"blur"}]},showTip:!1,tipType:""}},computed:{regionField:{get(){return this.formItem.regionId||this.formItem.region},set(e){}},zipTip(){let e=this.$t("center_account_address_form_zip_tip"),t="";return t=e.includes("zip code")?e.replace("zip code",'<span style="color: red">zip code</span>').replace("address",'<span style="color: red">address</span>'):e.replace("邮编",'<span style="color: red">邮编</span>').replace("地址",'<span style="color: red">地址</span>'),t}},mounted(){this.$store.dispatch("getAreaList").then(e=>{this.areaList=e})},methods:{regionValidator(e,t,s){""===this.formItem.regionId&&""===this.formItem.region&&s("Region must be filled"),s()},getRegionList(e,t){let s={pid:e};Object(i["a"])(s).then(e=>{this.regionStr="","area"===t&&(this.regionList=e.data.list||[]),"region"===t&&(this.cityList=e.data.list||[],this.cityFilterList=this.cityList)})},selectAreaChange(e){this.formItem.city="",this.formItem.region="",this.$set(this.formItem,"regionId",""),this.$set(this.formItem,"areaId",e),this.getRegionList(e,"area")},selectRegionChange(e){this.formItem.city="",this.formItem.region="",this.$set(this.formItem,"regionId",e),this.getRegionList(e,"region")},regionChange(e){this.formItem.city="",this.$set(this.formItem,"regionId","")},remoteMethod(){let e=this.formItem.city;this.popoverShow=!0,""!==e?(this.cityFilterList=this.cityList.filter(t=>t.name.toLowerCase().indexOf(e.toLowerCase())>-1),0===this.cityFilterList.length&&(this.popoverShow=!1)):(this.cityFilterList=this.cityList,this.popoverShow=!1)},selectCity(e){this.formItem.city=e.name,this.popoverShow=!1},modalTip(e){this.$refs.ruleForm.validateField(e,t=>{t||(this.tipType=e,this.showTip=!0)})},assignData(e){this.$emit("confirm",e)},initForm(){this.formType="Create Address",this.formItem={id:"",areaId:"",address:"",region:"",regionId:"",city:"",zipcode:"",telephone:"",setAsDefault:!1,consignee:"",firstname:""}},createAddress(){this.initForm(),this.visible=!0},editAddress(e){this.formType="Edit Address",this.regionStr=e.region_str,this.getRegionList(e.area_id,"area"),this.visible=!0,this.formItem={id:e.id,areaId:e.area_id,address:e.address,zipcode:e.zipcode,telephone:e.telephone,setAsDefault:Boolean(e.isdefault),consignee:e.consignee,firstname:e.firstname,region:e.region,regionId:e.region_id,city:e.city}},handleSetAddress(){this.$refs.ruleForm.clearValidate();const e=this.formItem;this.$refs.ruleForm.validate((t,s)=>{if(!t)return!1;this.confirmLoading=!0,Object(i["e"])(e).then(e=>{this.confirmLoading=!1,this.visible=!1,this.$message.success(this.formType+" success"),this.assignData(e)}).catch(e=>{this.confirmLoading=!1})})},handleCancel(){this.$refs.ruleForm.clearValidate(),this.visible=!1},cancelReadOnly(e){this.$nextTick(()=>{if(!e){const{select:e}=this.$refs;if(e){const t=e.$el.querySelector(".el-input__inner");t.removeAttribute("readonly")}}})}}},_=p,f=(s("afcb"),Object(l["a"])(_,r,o,!1,null,"f66e36f8",null));t["a"]=f.exports},fc54:function(e,t,s){"use strict";s("50a7")}}]);